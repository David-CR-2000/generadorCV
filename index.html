<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de CV</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- HTML2PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Estilos CSS personalizados -->
    <link rel="stylesheet" href="static/css/styles.css">
</head>
<body>
    <div class="container">
        <header class="text-center my-4">
            <h1>Generador de Curriculum Vitae</h1>
            <p class="lead">Crea tu CV profesional en minutos</p>
        </header>

        <div class="row">
            <div class="col-lg-8">
                <div class="card shadow-sm mb-4">
                    <div class="card-body">
                        <form id="cv-form">
                            <!-- Navegación de pestañas -->
                            <ul class="nav nav-tabs mb-3" id="form-tabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="personal-tab" data-bs-toggle="tab" data-bs-target="#personal" type="button" role="tab" aria-controls="personal" aria-selected="true">Datos Personales</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="education-tab" data-bs-toggle="tab" data-bs-target="#education" type="button" role="tab" aria-controls="education" aria-selected="false">Educación</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="experience-tab" data-bs-toggle="tab" data-bs-target="#experience" type="button" role="tab" aria-controls="experience" aria-selected="false">Experiencia</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="skills-tab" data-bs-toggle="tab" data-bs-target="#skills" type="button" role="tab" aria-controls="skills" aria-selected="false">Habilidades</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="design-tab" data-bs-toggle="tab" data-bs-target="#design" type="button" role="tab" aria-controls="design" aria-selected="false">Diseño</button>
                                </li>
                            </ul>

                            <!-- Contenido de pestañas -->
                            <div class="tab-content" id="form-tab-content">
                                <!-- Datos Personales -->
                                <div class="tab-pane fade show active" id="personal" role="tabpanel" aria-labelledby="personal-tab">
                                    <h3 class="mb-3">Información Personal</h3>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="nombre" class="form-label">Nombre Completo *</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="nombre" name="nombre" required>
                                                <button class="btn btn-outline-secondary example-btn" type="button" data-field="nombre"><i class="bi bi-question-circle"></i></button>
                                            </div>
                                            <div class="invalid-feedback">Por favor ingresa tu nombre completo</div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="profesion" class="form-label">Profesión/Título</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="profesion" name="profesion">
                                                <button class="btn btn-outline-secondary example-btn" type="button" data-field="profesion"><i class="bi bi-question-circle"></i></button>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="email" class="form-label">Email *</label>
                                            <input type="email" class="form-control" id="email" name="email" required>
                                            <div class="invalid-feedback">Por favor ingresa un email válido</div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="telefono" class="form-label">Teléfono *</label>
                                            <input type="tel" class="form-control" id="telefono" name="telefono" required>
                                            <div class="invalid-feedback">Por favor ingresa un número de teléfono válido</div>
                                        </div>
                                        <div class="col-md-12">
                                            <label for="direccion" class="form-label">Dirección</label>
                                            <input type="text" class="form-control" id="direccion" name="direccion">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="linkedin" class="form-label">LinkedIn</label>
                                            <input type="url" class="form-control" id="linkedin" name="linkedin" placeholder="https://linkedin.com/in/tu-perfil">
                                            <div class="invalid-feedback">La URL debe comenzar con http:// o https://</div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="sitio_web" class="form-label">Sitio Web</label>
                                            <input type="url" class="form-control" id="sitio_web" name="sitio_web" placeholder="https://tu-sitio.com">
                                            <div class="invalid-feedback">La URL debe comenzar con http:// o https://</div>
                                        </div>
                                        <div class="col-12">
                                            <label for="resumen" class="form-label">Resumen Profesional</label>
                                            <div class="input-group">
                                                <textarea class="form-control" id="resumen" name="resumen" rows="4"></textarea>
                                                <button class="btn btn-outline-secondary example-btn" type="button" data-field="resumen"><i class="bi bi-question-circle"></i></button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between mt-4">
                                        <div></div>
                                        <button type="button" class="btn btn-primary next-tab">Siguiente</button>
                                    </div>
                                </div>

                                <!-- Educación -->
                                <div class="tab-pane fade" id="education" role="tabpanel" aria-labelledby="education-tab">
                                    <h3 class="mb-3">Educación</h3>
                                    <div id="education-container">
                                        <div class="education-entry card mb-3 p-3">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label">Título/Grado</label>
                                                    <input type="text" class="form-control" name="educacion[0][titulo]">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Institución</label>
                                                    <input type="text" class="form-control" name="educacion[0][institucion]">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Fecha Inicio</label>
                                                    <input type="month" class="form-control" name="educacion[0][fecha_inicio]">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Fecha Fin</label>
                                                    <input type="month" class="form-control" name="educacion[0][fecha_fin]">
                                                </div>
                                                <div class="col-12">
                                                    <label class="form-label">Descripción</label>
                                                    <textarea class="form-control" name="educacion[0][descripcion]" rows="2"></textarea>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-sm btn-outline-danger remove-entry mt-2 align-self-end">Eliminar</button>
                                        </div>
                                    </div>
                                    <button type="button" id="add-education" class="btn btn-outline-secondary mb-3">+ Añadir Educación</button>
                                    <div class="d-flex justify-content-between mt-4">
                                        <button type="button" class="btn btn-outline-secondary prev-tab">Anterior</button>
                                        <button type="button" class="btn btn-primary next-tab">Siguiente</button>
                                    </div>
                                </div>

                                <!-- Experiencia -->
                                <div class="tab-pane fade" id="experience" role="tabpanel" aria-labelledby="experience-tab">
                                    <h3 class="mb-3">Experiencia Laboral</h3>
                                    <div id="experience-container">
                                        <div class="experience-entry card mb-3 p-3">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label">Puesto</label>
                                                    <input type="text" class="form-control" name="experiencia[0][puesto]">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Empresa</label>
                                                    <input type="text" class="form-control" name="experiencia[0][empresa]">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Fecha Inicio</label>
                                                    <input type="month" class="form-control" name="experiencia[0][fecha_inicio]">
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Fecha Fin</label>
                                                    <input type="month" class="form-control" name="experiencia[0][fecha_fin]">
                                                    <div class="form-check mt-2">
                                                        <input class="form-check-input trabajo-actual" type="checkbox" id="trabajo_actual_0">
                                                        <label class="form-check-label" for="trabajo_actual_0">Trabajo Actual</label>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <label class="form-label">Descripción</label>
                                                    <div class="input-group">
                                                        <textarea class="form-control" name="experiencia[0][descripcion]" rows="3"></textarea>
                                                        <button class="btn btn-outline-secondary example-btn" type="button" data-field="experiencia_descripcion"><i class="bi bi-question-circle"></i></button>
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-sm btn-outline-danger remove-entry mt-2 align-self-end">Eliminar</button>
                                        </div>
                                    </div>
                                    <button type="button" id="add-experience" class="btn btn-outline-secondary mb-3">+ Añadir Experiencia</button>
                                    <div class="d-flex justify-content-between mt-4">
                                        <button type="button" class="btn btn-outline-secondary prev-tab">Anterior</button>
                                        <button type="button" class="btn btn-primary next-tab">Siguiente</button>
                                    </div>
                                </div>

                                <!-- Habilidades -->
                                <div class="tab-pane fade" id="skills" role="tabpanel" aria-labelledby="skills-tab">
                                    <h3 class="mb-3">Habilidades</h3>
                                    <div class="mb-4">
                                        <label class="form-label">Habilidades Técnicas</label>
                                        <div class="input-group">
                                            <input type="text" id="habilidad-tecnica" class="form-control" placeholder="Añadir habilidad">
                                            <button class="btn btn-outline-secondary" type="button" id="add-skill">Añadir</button>
                                            <button class="btn btn-outline-secondary example-btn" type="button" data-field="habilidades"><i class="bi bi-question-circle"></i></button>
                                        </div>
                                        <div id="skills-container" class="mt-2 d-flex flex-wrap gap-2">
                                            <!-- Las habilidades se añadirán aquí dinámicamente -->
                                        </div>
                                        <input type="hidden" id="habilidades" name="habilidades" value="">
                                    </div>
                                    <div class="mb-4">
                                        <label class="form-label">Idiomas</label>
                                        <div id="languages-container">
                                            <div class="language-entry row g-2 mb-2">
                                                <div class="col-md-6">
                                                    <input type="text" class="form-control" name="idiomas[0][idioma]" placeholder="Idioma">
                                                </div>
                                                <div class="col-md-5">
                                                    <select class="form-select" name="idiomas[0][nivel]">
                                                        <option value="">Nivel</option>
                                                        <option value="Nativo">Nativo</option>
                                                        <option value="Fluido">Fluido</option>
                                                        <option value="Avanzado">Avanzado</option>
                                                        <option value="Intermedio">Intermedio</option>
                                                        <option value="Básico">Básico</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-1">
                                                    <button type="button" class="btn btn-outline-danger remove-language">×</button>
                                                </div>
                                            </div>
                                        </div>
                                        <button type="button" id="add-language" class="btn btn-outline-secondary btn-sm mt-2">+ Añadir Idioma</button>
                                    </div>
                                    <div class="d-flex justify-content-between mt-4">
                                        <button type="button" class="btn btn-outline-secondary prev-tab">Anterior</button>
                                        <button type="button" class="btn btn-primary next-tab">Siguiente</button>
                                    </div>
                                </div>

                                <!-- Diseño -->
                                <div class="tab-pane fade" id="design" role="tabpanel" aria-labelledby="design-tab">
                                    <h3 class="mb-3">Diseño del CV</h3>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label class="form-label">Plantilla</label>
                                            <div class="d-flex gap-3">
                                                <div class="form-check template-option">
                                                    <input class="form-check-input" type="radio" name="plantilla" id="template-ats" value="ats" checked>
                                                    <label class="form-check-label" for="template-ats">
                                                        <div class="template-preview ats-preview">ATS</div>
                                                    </label>
                                                </div>
                                                <div class="form-check template-option">
                                                    <input class="form-check-input" type="radio" name="plantilla" id="template-modern" value="moderno">
                                                    <label class="form-check-label" for="template-modern">
                                                        <div class="template-preview modern-preview">Moderno</div>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Color Principal</label>
                                            <div class="d-flex flex-wrap gap-2" id="color-options">
                                                <!-- Los colores se cargarán dinámicamente -->
                                            </div>
                                            <input type="hidden" id="color_principal" name="color_principal" value="#2c3e50">
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between mt-4">
                                        <button type="button" class="btn btn-outline-secondary prev-tab">Anterior</button>
                                        <button type="button" id="generate-cv" class="btn btn-success">Generar CV</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="sticky-top" style="top: 20px;">
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">Vista Previa</h5>
                        </div>
                        <div class="card-body p-2">
                            <div id="cv-preview" class="cv-preview">
                                <div class="preview-placeholder">
                                    Complete los datos para ver la vista previa
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modales -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-light">
                    <h5 class="modal-title" id="exampleModalLabel">Ejemplo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="example-content"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de descarga -->
    <div class="modal fade" id="downloadModal" tabindex="-1" aria-labelledby="downloadModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="downloadModalLabel">CV Generado Correctamente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="mb-4">
                        <i class="bi bi-check-circle-fill text-success" style="font-size: 4rem;"></i>
                    </div>
                    <p>Tu CV ha sido generado con éxito.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Template oculto para generación de PDF -->
    <div id="pdf-template" style="display: none;"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Script principal -->
    <script src="static/js/main.js"></script>
    <!-- Datos JSON incrustados (anteriormente cargados desde el servidor) -->
    <script>
        // Colores predeterminados
        const defaultColors = [
            {"name": "Azul Oscuro", "hex": "#2c3e50"},
            {"name": "Azul", "hex": "#3498db"},
            {"name": "Verde", "hex": "#2ecc71"},
            {"name": "Morado", "hex": "#9b59b6"},
            {"name": "Rojo", "hex": "#e74c3c"},
            {"name": "Naranja", "hex": "#e67e22"},
            {"name": "Gris", "hex": "#7f8c8d"},
            {"name": "Negro", "hex": "#2d3436"}
        ];
        
        // Ejemplos de campos
        const fieldExamples = {
            "nombre": "Ejemplo: Juan Pérez González",
            "profesion": "Ejemplo: Desarrollador Web Full Stack",
            "resumen": "Desarrollador web con más de 5 años de experiencia en la creación de aplicaciones web responsivas y escalables. Especializado en JavaScript, React y Node.js. Apasionado por crear soluciones tecnológicas que mejoren la experiencia del usuario y resuelvan problemas de negocio.",
            "experiencia_descripcion": "• Desarrollé e implementé nuevas funcionalidades para la plataforma principal de la empresa\n• Optimicé el rendimiento del sitio web, mejorando el tiempo de carga en un 40%\n• Colaboré con el equipo de diseño para mejorar la experiencia de usuario\n• Implementé pruebas automatizadas que redujeron los errores en producción en un 25%",
            "habilidades": "JavaScript, HTML5, CSS3, React, Node.js, Express, MongoDB, Git, Docker, AWS"
        };
    </script>
</body>
</html> 